<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Cart Page</title>
  <link rel="stylesheet" href="cart.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
</head>
<body>
  <div class="navbar" style="font-family: 'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif; font-size: 25px;" >
  <span class="brand" style="font-weight: bolder;">VARNIKAA</span>
  <a href="varnikaa.html">Home</a>
  <a href="About.html">About</a>
  <a href="shop.html">Shop</a>
  <a target="_blank" href="Login.html">Login</a>
  <i id="darkModeToggle" class="fas fa-moon" style="cursor: pointer; font-size: 20px;"></i>
  </div>
  <h1 style="text-align:center; margin-top: 40px; font-family: Verdana, Geneva, Tahoma, sans-serif; font-size: 35px; font-weight: 40px;">YOUR CART</h1>
  <div id="cart-items" style="max-width: 800px; margin: 0 auto; padding: 30px;"></div>
  <div id="total"></div>
  <script>
  const toggleIcon = document.getElementById("darkModeToggle");

  toggleIcon.addEventListener("click", () => {
    document.body.classList.toggle("dark-mode");

    if (document.body.classList.contains("dark-mode")) {
      toggleIcon.classList.remove("fa-moon");
      toggleIcon.classList.add("fa-sun");
    } else {
      toggleIcon.classList.remove("fa-sun");
      toggleIcon.classList.add("fa-moon");
    }
  });
  function renderCart() {
      const cartItemsContainer = document.getElementById("cart-items");
      const totalDiv = document.getElementById("total");

      let cart = JSON.parse(localStorage.getItem("cart")) || [];

      cartItemsContainer.innerHTML = '';
      totalDiv.innerHTML = '';

      if (cart.length === 0) {
        cartItemsContainer.innerHTML = '<p class="empty-message">Your cart is empty.</p>';
        return;
      }

      let total = 0;

      cart.forEach((item, index) => {
        const price = parseFloat(item.price.replace(/[₹,]/g, ""));
        total += price;

        const cartItem = document.createElement('div');
        cartItem.className = 'cart-item';

        cartItem.innerHTML = `
          <img src="${item.img}" alt="${item.title}">
          <div class="item-info">
            <h3>${item.title}</h3>
            <p>${item.price}</p>
          </div>
          <i class="fas fa-trash remove-icon" data-index="${index}" title="Remove from cart"></i>
        `;

        cartItemsContainer.appendChild(cartItem);
      });

      totalDiv.textContent = `Total: ₹${total.toLocaleString()}`;

      // Attach remove event after rendering
      document.querySelectorAll('.remove-icon').forEach(icon => {
        icon.addEventListener('click', function () {
          const indexToRemove = parseInt(this.getAttribute('data-index'));
          let cart = JSON.parse(localStorage.getItem("cart")) || [];
          cart.splice(indexToRemove, 1);
          localStorage.setItem("cart", JSON.stringify(cart));
          renderCart(); // re-render the cart
        });
      });
    }

    window.onload = renderCart;
</script>
</body>
</html>